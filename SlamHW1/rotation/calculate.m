function [ H ] = calculate(  )
%UNTITLED4 此处显示有关此函数的摘要
%   此处显示详细说明
%[x1,y1]=m(796,2251,2476,2329);
%[x2,y2]=m(2028,2290,3869,2609);
%[x3,y3]=m(1803,1135,3646,1223);
%[x4,y4]=m(616,1403,2331,1477);
%[x5,y5]=m(540,2023,2227,2060);
%[x6,y6]=m(1264,1674,2953,1791);
%[x7,y7]=m(1494,1839,3218,1997);
%[x8,y8]=m(1528,990,3274,1067);

%[x1,y1]=m(284,804,885,832);
%[x2,y2]=m(146,737,756,744);
%[x3,y3]=m(252,637,852,657);
%[x4,y4]=m(644,404,1302,436);
%[x5,y5]=m(503,670,1101,720);
%[x6,y6]=m(385,943,981,995);

[x1,y1]=m(569,696,990,754);
[x2,y2]=m(279,367,760,489);
[x3,y3]=m(273,695,668,718);
[x4,y4]=m(654,696,1080,764);
[x5,y5]=m(347,731,752,767);

%X=[x1;x2;x3;x4;x5;x6;x7;x8];
%X=[x1;x2;x3;x5];
%Y=[y1;y2;y3;y5];
%h=[X\Y;1];

X=[x1;x2;x3;x4;x5];
[U,S,V]=svd(X);

%X(1,:)*(X\Y);

H=reshape(V(:,9),[3,3])';
b=H*[695;654;1];
l4=[1080;764;1]-b/b(3);
%l6=[981;995;1]-H*[385;943;1];
b=H*[1080;1440;1];
b=b/b(3);
l2=[760;489;1]-b/b(3);

end


function [ left,right ] = m( u1,v1,u2,v2 )
%UNTITLED4 此处显示有关此函数的摘要
%   此处显示详细说明
left=[u1,v1,1,0,0,0,-u1*u2,-v1*u2,-u2;
      0,0,0,u1,v1,1,-u1*v2,-v1*v2,-v2];
right=[u2;v2];
end



